 <div class="row" *ngIf="tabData.length >= 1">
  <div class="col-sm-12">
    <div class="d-flex align-items-baseline">
      <i style="font-size: 20px"
        class="fa fa-arrow-left"
        (click)="back()"
        aria-label="back"></i>
      <h3 class="ms-4 page-title" *ngIf="tabData.length > 1">{{ view ? globalServ.getGlobalNames('view') : (update ?
          globalServ.getGlobalNames('update')
          :globalServ.getGlobalNames('create')) }} Employee</h3>
      <h3 class="ms-4 page-title" *ngIf="tabData.length === 1"> {{ view ? globalServ.getGlobalNames('view') : (update ?
          globalServ.getGlobalNames('update')
          :globalServ.getGlobalNames('create')) }} {{tabData[0].header}}</h3>
    </div>
  </div>
</div>

<div class="card p-3">
  <div class="row">
    <div class="col-md-12">
      <!-- if the dynamic form has tabs starts -->
      <ng-stepper class="cdk-step" #cdkStepper [linear]="false" class="mt-1"
        *ngIf="hasTabs">
        <cdk-step *ngFor="let tab of tabData; let i= index"
          [stepControl]="tab.formCode" [optional]="true">
          <ng-template cdkStepLabel>
            <div
              class="step-bullet"
              style="width: 40px; height: 40px; z-index: 105">
              <img
                src="assets/img/icon/User_Add.svg"
                height="20"
                width="20" />
            </div>
            <div class="step-title">{{tab.header}}</div>
          </ng-template>
          <form [formGroup]="tab.formGroup">
            <div class="row">
              <ng-container *ngFor="let field of tab.array">

                <span *ngIf="field.sameLine === false"> <ng-container
                    class="block"></ng-container></span>
                <!-- for text field -->
                <ng-container
                  *ngIf="field.columnName !== 'employeeCode' && field.columnName !== 'employeeRefCode' || update">
                  <div
                    *ngIf="field.dataType === 'text'"
                    class="form-group "
                    [ngClass]="
                          field.pctSize !== null
                            ? 'col-md-' + field.pctSize
                            : 'col-md'
                        ">
                    <label for="{{ field.columnName }}">{{ field.label }}
                      <span
                        *ngIf="field.isMandatory === true"
                        class="text-danger">
                        *</span>
                    </label>

                    <div class="input-group"
                      *ngIf="field.columnName === 'email'">
                      <input
                        class="form-control"
                        type="email"
                        [placeholder]="
                            field.placeHolder !== null
                              ? [field.placeHolder]
                              : 'Enter ' + [field.label]"
                        [email]="true"
                        (keyup)="onEmailChange($event.target.value)"
                        [class.invalid]="
                          tab.formGroup.get(field.columnName).invalid &&
                          tab.formGroup.get(field.columnName).touched
                        "
                        [formControlName]="field.columnName" />
                      <span
                        id="email"
                        class="input-group-custom"
                        *ngIf="
                          showSuccessEmailToolTip === 'EMAIL ALREADY EXIST'
                        "
                        data-toggle="tooltip"
                        data-placement="right"
                        title="Email Already Exists">
                        <i
                          id="email"
                          style="color: #dc3545"
                          class="fa fa-exclamation-triangle"
                          aria-hidden="true"></i>
                      </span>
                      <span
                        id="email"
                        class="input-group-custom"
                        *ngIf="showSuccessEmailToolTip === 'EMAIL NOT EXISTS'"
                        data-toggle="tooltip"
                        data-placement="right"
                        title>
                        <i
                          style="color: #35ef57"
                          id="email"
                          class="far fa-check-circle"
                          aria-hidden="true"></i>
                      </span>
                    </div>

                    <!-- if not email then bottom one will display -->
                    <input
                      *ngIf="field.columnName !== 'email'"
                      type="text"
                      class="form-control"
                      [placeholder]="
                            field.placeHolder !== null
                              ? [field.placeHolder]
                              : 'Enter ' + [field.label]
                          "
                      [formControlName]="field.columnName" />
                    <div class="block">
                      <div style="color: #dc3545"
                        *ngIf="tab.formGroup.get(field.columnName).invalid && tab.formGroup.get(field.columnName).touched
                       && tab.formGroup.get(field.columnName).hasError('required')">
                        {{field.label}} {{globalServ.showGlobalErrors('required')}}.
                      </div>
                    </div>
                  </div>
                  <!-- text field end-->

                  <!-- for textarea field -->
                  <div
                    *ngIf="field.dataType === 'textarea'"
                    class="form-group "
                    [ngClass]="
                          field.pctSize !== null
                            ? 'col-md-' + field.pctSize
                            : 'col-md'
                        ">
                    <label for="{{ field.columnName }}">{{ field.label }}
                      <span
                        *ngIf="field.isMandatory === true"
                        class="text-danger">
                        *</span>
                    </label>
                    <textarea
                      type="text"
                      class="form-control"
                      [placeholder]="
                            field.placeHolder !== null
                              ? [field.placeHolder]
                              : 'Enter ' + [field.label]
                          "
                      [formControlName]="field.columnName"></textarea>
                    <div class="block">
                      <div style="color: #dc3545"
                        *ngIf="tab.formGroup.get(field.columnName).invalid && tab.formGroup.get(field.columnName).touched && tab.formGroup.get(field.columnName).hasError('required')">
                        {{field.label}} {{globalServ.showGlobalErrors('required')}}.
                      </div>
                    </div>
                  </div>
                  <!-- for textarea field  ends-->

                  <!-- for dropdown field with given options-->
                  <div
                    *ngIf="
                          field.dataType === 'dropdown' &&
                          field.defaultValues?.tags
                        "
                    class="form-group "
                    [ngClass]="
                          field.pctSize !== null
                            ? 'col-md-' + field.pctSize
                            : 'col-md'
                        ">
                    <label for="{{ field.columnName }}">{{ field.label }}
                      <span
                        *ngIf="field.isMandatory === true"
                        class="text-danger">
                        *</span>
                    </label>
                    <select
                      class="form-select"
                      [placeholder]="
                            field.placeHolder !== null
                              ? [field.placeHolder]
                              : 'Enter ' + [field.label]"
                      [formControlName]="field.columnName">
                      <option selected value>-</option>
                      <option
                        *ngFor="let data of field.dropDownData"
                        [value]="data">
                        {{ data }}
                      </option>
                    </select>
                    <div class="block">
                      <div style="color: #dc3545"
                        *ngIf="tab.formGroup.get(field.columnName).invalid && tab.formGroup.get(field.columnName).touched && tab.formGroup.get(field.columnName).hasError('required')">
                        {{field.label}} {{globalServ.showGlobalErrors('required')}}.
                      </div>
                    </div>
                  </div>
                  <!-- for dropdown field with given options ends-->

                  <!-- for dropdown field with not given options-->
                  <div
                    *ngIf="
                          field.dataType === 'dropdown' &&
                          !field.defaultValues?.tags
                        "
                    class="form-group "
                    [ngClass]="
                          field.pctSize !== null
                            ? 'col-md-' + field.pctSize
                            : 'col-md'
                        ">
                    <label for="{{ field.columnName }}">{{field.label}}
                      <span
                        *ngIf="field.isMandatory === true"
                        class="text-danger">
                        *</span></label>
                    <select
                      *ngIf="field.columnName === 'payrollCode'"
                      (change)="getsalaryComp(field.columnName,$event.target.value)"
                      class="form-select"
                      [placeholder]="
                            field.placeHolder !== null
                              ? [field.placeHolder]
                              : 'Enter ' + [field.label]
                          "
                      [formControlName]="field.columnName">
                      <option selected value>-</option>
                      <option
                        *ngFor="let data of field.dropDownData"
                        [value]="data[field.defaultValues.key]">
                        {{ data[field.defaultValues.output] }}
                      </option>
                    </select>

                    <select
                      *ngIf="field.columnName !== 'payrollCode'"
                      class="form-select"
                      [placeholder]="
                            field.placeHolder !== null
                              ? [field.placeHolder]
                              : 'Enter ' + [field.label]
                          "
                      [formControlName]="field.columnName">
                      <option selected value>-</option>
                      <option
                        *ngFor="let data of field.dropDownData"
                        [value]="data[field.defaultValues.key]">
                        {{ data[field.defaultValues.output] }}
                      </option>
                    </select>
                    <div class="block">
                      <div style="color: #dc3545"
                        *ngIf="tab.formGroup.get(field.columnName).invalid && tab.formGroup.get(field.columnName).touched && tab.formGroup.get(field.columnName).hasError('required')">
                        {{field.label}} {{globalServ.showGlobalErrors('required')}}.
                      </div>
                    </div>
                  </div>
                  <!-- for dropdown field with not given options-->

                  <!-- for date field -->
                  <div
                    *ngIf="field.dataType === 'date'"
                    class="form-group "
                    [ngClass]="
                          field.pctSize !== null
                            ? 'col-md-' + field.pctSize
                            : 'col-md'
                        ">
                    <label for="{{ field.columnName }}">{{field.label}}
                      <span
                        *ngIf="field.isMandatory === true"
                        class="text-danger">
                        *</span></label>
                    <input
                      type="date"
                      class="form-control"
                      [placeholder]="
                            field.placeHolder !== null
                              ? [field.placeHolder]
                              : 'Enter ' + [field.label]
                          "
                      [formControlName]="field.columnName" />
                    <div class="block">
                      <div style="color: #dc3545"
                        *ngIf="tab.formGroup.get(field.columnName).invalid && tab.formGroup.get(field.columnName).touched && tab.formGroup.get(field.columnName).hasError('required')">
                        {{field.label}} {{globalServ.showGlobalErrors('required')}}.
                      </div>
                    </div>
                  </div>
                  <!-- for date field ends-->

                  <!-- for number field -->
                  <div
                    *ngIf="field.dataType === 'number'"
                    class="form-group "
                    [ngClass]="
                          field.pctSize !== null
                            ? 'col-md-' + field.pctSize
                            : 'col-md'
                        ">
                    <label for="{{ field.columnName }}">{{field.label}}
                      <span
                        *ngIf="field.isMandatory === true"
                        class="text-danger">
                        *</span>
                    </label>
                    <input
                      type="number"
                      class="form-control"
                      [placeholder]="
                            field.placeHolder !== null
                              ? [field.placeHolder]
                              : 'Enter ' + [field.label]
                          "
                      [formControlName]="field.columnName" />
                    <div class="block">
                      <div style="color: #dc3545"
                        *ngIf="tab.formGroup.get(field.columnName).invalid && tab.formGroup.get(field.columnName).touched && tab.formGroup.get(field.columnName).hasError('required')">
                        {{field.label}} {{globalServ.showGlobalErrors('required')}}.
                      </div>
                    </div>

                  </div>
                  <!-- for number field ends-->

                  <!-- for checkbox field-->
                  <div
                    *ngIf="field.dataType === 'checkbox'"
                    class="form-check form-group  ms-2"
                    [ngClass]="
                          field.pctSize !== null
                            ? 'col-md-' + field.pctSize
                            : 'col-md'
                        ">
                    <input
                      type="checkbox"
                      class="form-check-input"
                      [placeholder]="
                            field.placeHolder !== null
                              ? [field.placeHolder]
                              : 'Enter ' + [field.label]
                          "
                      [formControlName]="field.columnName" />
                    <label for="{{ field.columnName }}">{{ field.label }}
                      <span
                        *ngIf="field.isMandatory === true"
                        class="form-check-label text-danger">
                        *</span>
                    </label>
                  </div>

                  <div class="col-md-6" *ngIf="field.dataType === 'byte'">
                    <div class="row">
                      <!-- <div class="employee-image">Employee Image</div> -->
                      <label for class="col-form-label">Employee Image</label>
                      <div class="row ">

                        <div class="col-md-4 col-sm-4">
                          <div class="emp-profile-img-wrap">
                            <img
                              *ngIf="emp?.image"
                              style="width: -webkit-fill-available"
                              [src]="emp?.image" />
                            <img
                              *ngIf="!emp?.image"
                              style="width: -webkit-fill-available"
                              src="assets/img/emp-default-img.svg" />
                          </div>
                        </div>

                        <div *ngIf="!view"
                          class="col-md-8 col-sm-8 img-box d-flex justify-content-center"
                          style="
                        flex-direction: column;
                        height: 130px;
                      ">
                          <div class="drop-your-images-here-or-browse">
                            <span>
                              <span
                                class="drop-your-images-here-or-browse-span">
                                Click to upload image or
                              </span>
                              <span
                                class="drop-your-images-here-or-browse-span2"
                                *ngIf="!view"
                                (click)="open()">browse</span>
                            </span>
                          </div>
                          <div class="supports-jpg-png-of-300-x-300-size">
                            Supports JPG &amp; PNG of 300x300 size
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </ng-container>
              </ng-container>
            </div>

            <!--  [disabled]="tab.formGroup.invalid" -->
            <section class="mt-2">
              <ng-container *ngIf="i === 0; else notFirstTab">
                <!-- First Tab -->
                <button class="btn delete-btn me-3"
                  (click)="back()">Cancel</button>
                <button class="btn add-btn" type="submit" cdkStepperNext>
                  Next
                </button>
              </ng-container>
              <ng-template #notFirstTab>
                <ng-container *ngIf="i !== tabData.length - 1; else lastTab">
                  <!-- Not First and Not Last Tab -->
                  <button class="btn btn-secondary secondary-btn" type="submit"
                    cdkStepperPrevious>
                    Previous
                  </button>
                  <button class="btn add-btn" type="submit" cdkStepperNext>
                    Next
                  </button>
                </ng-container>
                <ng-template #lastTab>

                  <ng-container>
                    <div class="form-check col-md-10 mt-2" *ngIf="hasRules">
                      <input
                        class="form-check-input"
                        type="checkbox"
                        id="rulesQuestion"
                        [(ngModel)]="rulesQuestion"
                        [ngModelOptions]="{standalone: true}"
                        (change)="getsalaryComp()" />
                      <label class="form-check-label" for="rulesQuestion">
                        Do you want to calculate salary by pay rules
                      </label>
                    </div>
                    <div class="col-sm-6">
                      <div class="form-group">
                        <label class="col-form-label">Salary &nbsp;<span
                            class="text-danger">*</span></label>
                        <input
                          class="form-control"
                          type="number"
                          [disabled]="disableSalary"
                          [(ngModel)]="salary"
                          [ngModelOptions]="{standalone: true}" />
                      </div>
                      <div *ngIf="rulesQuestion === true">
                        <button class="btn btn-primary"
                          (click)="getsalaryComp()">Calculate</button>
                      </div>
                    </div> <div class="col-sm-6">
                      <div class="form-group">
                        <label class="col-form-label">Salary Calculate
                          &nbsp;<span class="text-danger">*</span></label>
                        <input
                          class="form-control"
                          type="number"
                          [(ngModel)]="salaryCalculation"
                          [ngModelOptions]="{standalone: true}" />
                      </div>
                      <div *ngIf="rulesQuestion === true">
                        <button class="btn btn-primary"
                          (click)="getsalaryComp()">Calculate</button>
                      </div>
                    </div>
                    <div class="row mt-5"
                      *ngIf="showComponentCode && salaryComponents.length > 0">
                      <div class="col-md ol-sm table-leftblock"
                        [ngStyle]="{'border-right': hasDeductions ? '1px solid #ccc' : '0'}">
                        <table class="col-sm-12 col-md-12 ">
                          <tr class="col-md-12">
                            <th class="col-md-5">Earnings</th>
                            <th class="text-center col-md-2">%</th>
                            <th class="text-center col-md-4">Amount</th>
                          </tr>
                          <ng-container *ngFor="let row of salaryComponents">
                            <ng-container *ngIf="!row.isDeduction">
                              <tr class="col-md-12">
                                <td class="col-md-5">{{ row.componentCode
                                  }}</td>
                                <td class="col-md-2">
                                  <input
                                    type="number"
                                    (keyup)="onChangeperct($event.target.value,row)"
                                    placeholder="0.00"
                                    class="form-control text-end inputwid"
                                    [(ngModel)]="row.pct"
                                    [ngModelOptions]="{standalone: true}"
                                    [disabled]="view" />

                                  <!-- (keyup)="calCulateSalary()" -->
                                </td>

                                <td class="col-md-4">
                                  <input
                                    type="number"
                                    (keyup)="onChangeBal($event.target.value,row)"
                                    placeholder="0.00"
                                    class="form-control text-end inputwid"
                                    [(ngModel)]="row.amount"
                                    [ngModelOptions]="{standalone: true}"
                                    [disabled]="view" />
                                </td>

                              </tr>
                            </ng-container>
                          </ng-container>
                        </table>
                      </div>
                      <div class="col-md-6 ol-sm-12 table-rightblock">
                        <!-- <h3>Deductions</h3> -->
                        <table class="col-sm-12 col-md-12 "
                          *ngIf="hasDeductions">
                          <tr class="col-md-12">
                            <th class="col-md-5">Deductions</th>
                            <th class="text-center col-md-2">%</th>
                            <th class="text-center col-md-4">Amount</th>
                          </tr>
                          <ng-container *ngFor="let row of salaryComponents">
                            <ng-container *ngIf="row.isDeduction">
                              <tr class="col-md-12">
                                <td class="col-md-5">{{ row.componentCode
                                  }}</td>
                                <td class="col-md-2">
                                  <input
                                    type="number"
                                    (keyup)="onChangeperct($event.target.value,row)"
                                    placeholder="0.00"
                                    class="form-control text-end inputwid"
                                    [(ngModel)]="row.pct"
                                    [ngModelOptions]="{standalone: true}"
                                    [disabled]="view" />

                                  <!-- (keyup)="calCulateSalary()" -->
                                </td>

                                <td class="col-md-4">
                                  <input
                                    type="number"
                                    (keyup)="onChangeBal($event.target.value,row)"
                                    placeholder="0.00"
                                    class="form-control text-end inputwid"
                                    [(ngModel)]="row.amount"
                                    [ngModelOptions]="{standalone: true}"
                                    [disabled]="view" />

                                  <!-- (keyup)="calCulateSalary()" -->
                                </td>

                                <td>

                                </td>
                              </tr>
                            </ng-container>
                          </ng-container>
                        </table>
                      </div>
                    </div>
                  </ng-container>

                  <!-- Last Tab -->
                  <section class="form-group mt-3">
                    <button class="btn btn-secondary secondary-btn mb-3"
                      type="submit" cdkStepperPrevious>
                      Previous
                    </button> 
                    <button class="btn add-btn mb-3" *ngIf="!update"
                      type="submit"
                      [disabled]="tab.formGroup.invalid"
                      (click)="submitMultiTabDynamicForm(tab)">
                      Submit
                    </button>
                       <button class="btn add-btn mb-3" *ngIf="update"
                      type="submit"
                      [disabled]="tab.formGroup.invalid"
                      (click)="updatetMultiTabDynamicForm(tab.formGroup)">
                      Submit
                    </button>
                  </section>
                </ng-template>
              </ng-template>
            </section>
          </form>
        </cdk-step>
      </ng-stepper>
      <!-- if the dynamic form has tabs ends -->

      <!-- if the dynamic form has no tabs starts-->

      <ng-container *ngIf="!hasTabs">
        <div *ngFor="let tab of tabData; let i= index">

          <form [formGroup]="tab.formGroup">
            <div class="row">
              <ng-container *ngFor="let field of tab.array">

                <span *ngIf="field.sameLine === false"> <ng-container
                    class="block"></ng-container></span>
                <!-- for text field -->
                <ng-container
                  *ngIf="field.columnName !== 'employeeCode' && field.columnName !== 'employeeRefCode' ">

                  <div
                    *ngIf="field.dataType === 'text'"
                    class="form-group "
                    [ngClass]="
                          field.pctSize !== null
                            ? 'col-md-' + field.pctSize
                            : 'col-md'
                        ">
                    <label for="{{ field.columnName }}">{{ field.label }}
                      <span
                        *ngIf="field.isMandatory === true"
                        class="text-danger">
                        *</span>
                    </label>
                    <!-- if email then bottom one will display -->
                    <input
                      *ngIf="field.columnName === 'email'"
                      (keyup)="onEmailChange($event.target.value)"
                      type="text"
                      class="form-control"
                      [placeholder]="
                            field.placeHolder !== null
                              ? [field.placeHolder]
                              : 'Enter 111' + [field.label]"
                      [formControlName]="field.columnName" />
                    <!-- if not email then bottom one will display -->
                    <input
                      *ngIf="field.columnName !== 'email'"
                      type="text"
                      class="form-control"
                      [placeholder]="
                            field.placeHolder !== null
                              ? [field.placeHolder]
                              : 'Enter ' + [field.label]
                          "
                      [formControlName]="field.columnName" />

                    <div class="block">
                      <div style="color: #dc3545"
                        *ngIf="tab.formGroup.get(field.columnName).invalid && tab.formGroup.get(field.columnName).touched && tab.formGroup.get(field.columnName).hasError('required')">
                        {{field.label}} {{globalServ.showGlobalErrors('required')}}.
                      </div>
                    </div>
                  </div>
                  <!-- text field end-->

                  <!-- for textarea field -->
                  <div
                    *ngIf="field.dataType === 'textarea'"
                    class="form-group "
                    [ngClass]="
                          field.pctSize !== null
                            ? 'col-md-' + field.pctSize
                            : 'col-md'
                        ">
                    <label for="{{ field.columnName }}">{{ field.label }}
                      <span
                        *ngIf="field.isMandatory === true"
                        class="text-danger">
                        *</span>
                    </label>
                    <textarea
                      type="text"
                      class="form-control"
                      [placeholder]="
                            field.placeHolder !== null
                              ? [field.placeHolder]
                              : 'Enter ' + [field.label]
                          "
                      [formControlName]="field.columnName"></textarea>
                    <div class="block">
                      <div style="color: #dc3545"
                        *ngIf="tab.formGroup.get(field.columnName).invalid && tab.formGroup.get(field.columnName).touched && tab.formGroup.get(field.columnName).hasError('required')">
                        {{field.label}} {{globalServ.showGlobalErrors('required')}}.
                      </div>
                    </div>
                  </div>
                  <!-- for textarea field  ends-->

                  <!-- for dropdown field with given options-->
                  <div
                    *ngIf="
                          field.dataType === 'dropdown' &&
                          field.defaultValues?.tags
                        "
                    class="form-group "
                    [ngClass]="
                          field.pctSize !== null
                            ? 'col-md-' + field.pctSize
                            : 'col-md'
                        ">
                    <label for="{{ field.columnName }}">{{field.label}}
                      <span
                        *ngIf="field.isMandatory === true"
                        class="text-danger">
                        *</span></label>
                    <select
                      class="form-select"
                      [placeholder]="
                            field.placeHolder !== null
                              ? [field.placeHolder]
                              : 'Enter ' + [field.label]
                          "
                      [formControlName]="field.columnName">
                      <option selected value>-</option>
                      <option
                        *ngFor="let data of field.dropDownData"
                        [value]="data">
                        {{ data }}
                      </option>
                    </select>
                    <div class="block">
                      <div style="color: #dc3545"
                        *ngIf="tab.formGroup.get(field.columnName).invalid && tab.formGroup.get(field.columnName).touched && tab.formGroup.get(field.columnName).hasError('required')">
                        {{field.label}} {{globalServ.showGlobalErrors('required')}}.
                      </div>
                    </div>
                  </div>
                  <!-- for dropdown field with given options ends-->

                  <!-- for dropdown field with not given options-->
                  <div
                    *ngIf="
                          field.dataType === 'dropdown' &&
                          !field.defaultValues?.tags
                        "
                    class="form-group "
                    [ngClass]="
                          field.pctSize !== null
                            ? 'col-md-' + field.pctSize
                            : 'col-md'
                        ">
                    <label for="{{ field.columnName }}">{{field.label}}
                      <span
                        *ngIf="field.isMandatory === true"
                        class="text-danger">
                        *</span></label>
                    <select
                      *ngIf="field.columnName === 'payrollCode'"
                      (change)="getsalaryComp(field.columnName, $event.target.value)"
                      class="form-select"
                      [placeholder]="
                            field.placeHolder !== null
                              ? [field.placeHolder]
                              : 'Enter ' + [field.label]
                          "
                      [formControlName]="field.columnName">
                      <option selected value>-</option>
                      <option
                        *ngFor="let data of field.dropDownData"
                        [value]="data[field.defaultValues.key]">
                        {{ data[field.defaultValues.output] }}
                      </option>
                    </select>

                    <select
                      *ngIf="field.columnName !== 'payrollCode'"
                      class="form-select"
                      [placeholder]="
                            field.placeHolder !== null
                              ? [field.placeHolder]
                              : 'Enter ' + [field.label]
                          "
                      [formControlName]="field.columnName">
                      <option selected value>-</option>
                      <option
                        *ngFor="let data of field.dropDownData"
                        [value]="data[field.defaultValues.key]">
                        {{ data[field.defaultValues.output] }}
                      </option>
                    </select>
                    <div class="block">
                      <div style="color: #dc3545"
                        *ngIf="tab.formGroup.get(field.columnName).invalid && tab.formGroup.get(field.columnName).touched && tab.formGroup.get(field.columnName).hasError('required')">
                        {{field.label}} {{globalServ.showGlobalErrors('required')}}.
                      </div>
                    </div>
                  </div>
                  <!-- for dropdown field with not given options-->

                  <!-- for dropdown field with parameter-->
                  <!-- <div
                      *ngIf="
                          field.dataType === 'dropdown' && !field.defaultValues?.tags && field.defaultValues?.parameter
                        "
                      class="form-group "
                      [ngClass]="
                          field.pctSize !== null? 'col-md-' + field.pctSize
                            : 'col-md'
                        ">
                      <label for="{{ field.columnName }}">{{
                        field.label
                        }}2</label>
                      <select
                        class="form-select"
                        [placeholder]="
                            field.placeHolder !== null ? [field.placeHolder]
                              : 'Enter ' + [field.label]
                          "
                        [formControlName]="field.columnName">
                        <option
                          *ngFor="let data of field.dropDownData"
                          [value]="data[field.defaultValues.key]">
                          {{ data[field.defaultValues.output] }}
                        </option>
                      </select>
                    </div> -->

                  <!-- for dropdown field with parameter-->

                  <!-- for date field -->
                  <div
                    *ngIf="field.dataType === 'date'"
                    class="form-group "
                    [ngClass]="
                          field.pctSize !== null
                            ? 'col-md-' + field.pctSize
                            : 'col-md'
                        ">
                    <label for="{{ field.columnName }}">{{field.label}}
                      <span
                        *ngIf="field.isMandatory === true"
                        class="text-danger">
                        *</span></label>
                    <input
                      type="date"
                      class="form-control"
                      [placeholder]="
                            field.placeHolder !== null
                              ? [field.placeHolder]
                              : 'Enter ' + [field.label]
                          "
                      [formControlName]="field.columnName" />
                    <div class="block">
                      <div style="color: #dc3545"
                        *ngIf="tab.formGroup.get(field.columnName).invalid && tab.formGroup.get(field.columnName).touched && tab.formGroup.get(field.columnName).hasError('required')">
                        {{field.label}} {{globalServ.showGlobalErrors('required')}}.
                      </div>
                    </div>
                  </div>
                  <!-- for date field ends-->

                  <!-- for number field -->
                  <div
                    *ngIf="field.dataType === 'number'"
                    class="form-group "
                    [ngClass]="
                          field.pctSize !== null
                            ? 'col-md-' + field.pctSize
                            : 'col-md'
                        ">
                    <label for="{{ field.columnName }}">{{field.label}}
                      <span
                        *ngIf="field.isMandatory === true"
                        class="text-danger">
                        *</span></label>
                    <input
                      type="number"
                      class="form-control"
                      [placeholder]="
                            field.placeHolder !== null
                              ? [field.placeHolder]
                              : 'Enter ' + [field.label]
                          "
                      [formControlName]="field.columnName" />
                    <div class="block">
                      <div style="color: #dc3545"
                        *ngIf="tab.formGroup.get(field.columnName).invalid && tab.formGroup.get(field.columnName).touched && tab.formGroup.get(field.columnName).hasError('required')">
                        {{field.label}} {{globalServ.showGlobalErrors('required')}}.
                      </div>
                    </div>
                  </div>
                  <!-- for number field ends-->

                  <!-- for checkbox field-->
                  <div
                    *ngIf="field.dataType === 'checkbox'"
                    class="form-check form-group "
                    [ngClass]="
                          field.pctSize !== null
                            ? 'col-md-' + field.pctSize
                            : 'col-md'
                        ">
                    <input
                      type="checkbox"
                      class="form-check-input"
                      [placeholder]="
                            field.placeHolder !== null
                              ? [field.placeHolder]
                              : 'Enter ' + [field.label]
                          "
                      [formControlName]="field.columnName" />
                    <label for="{{ field.columnName }}">{{ field.label }}
                      <span
                        *ngIf="field.isMandatory === true"
                        class="form-check-label text-danger">
                        *</span>
                    </label>
                  </div>
                </ng-container>
              </ng-container>
            </div>

            <ng-container>
              <div class="form-check col-md-10 mt-2" *ngIf="hasRules">
                <input
                  class="form-check-input"
                  type="checkbox"
                  id="rulesQuestion"
                  [(ngModel)]="rulesQuestion"
                  [ngModelOptions]="{standalone: true}"
                  (change)="getsalaryComp()" />
                <label class="form-check-label" for="rulesQuestion">
                  Do you want to calculate salary by pay rules
                </label>
              </div>
              <div class="col-sm-6">
                <div class="form-group">
                  <label class="col-form-label">Salary &nbsp;<span
                      class="text-danger">*</span></label>
                  <input
                    class="form-control"
                    type="number"
                    [disabled]="disableSalary"
                    [(ngModel)]="salary"
                    [ngModelOptions]="{standalone: true}" />
                </div>
                <div *ngIf="rulesQuestion === true">
                  <button class="btn btn-primary"
                    (click)="getsalaryComp()">Calculate</button>
                </div>
              </div>
              <div class="row mt-5"
                *ngIf="showComponentCode && salaryComponents.length > 0">
                <div class="col-md ol-sm table-leftblock"
                  [ngStyle]="{'border-right': hasDeductions ? '1px solid #ccc' : '0'}">
                  <table class="col-sm-12 col-md-12 ">
                    <tr class>
                      <th>Earnings</th>
                      <th class="text-center">Amount</th>
                    </tr>
                    <ng-container *ngFor="let row of salaryComponents">
                      <ng-container *ngIf="!row.isDeduction">
                        <tr>
                          <td>{{ row.componentCode }}</td>
                          <td>
                            <input
                              type="number"
                              (keyup)="calCulateSalary()"
                              placeholder="0.00"
                              class="form-control text-end inputwid"
                              [(ngModel)]="row.amount"
                              [ngModelOptions]="{standalone: true}"
                              [disabled]="view" />
                          </td>
                        </tr>
                      </ng-container>
                    </ng-container>
                  </table>
                </div>
                <div class="col-md-6 ol-sm-12 table-rightblock">
                  <!-- <h3>Deductions</h3> -->
                  <table class="col-sm-12 col-md-12 " *ngIf="hasDeductions">
                    <tr>
                      <th>Deductions</th>
                      <th class="text-center">Amount</th>
                    </tr>
                    <ng-container *ngFor="let row of salaryComponents">
                      <ng-container *ngIf="row.isDeduction">
                        <tr>
                          <td>{{ row.componentCode }}</td>
                          <td>
                            <input
                              type="number"
                              placeholder="0.00"
                              (keyup)="calCulateSalary()"
                              class="form-control text-end inputwid"
                              [(ngModel)]="row.amount"
                              [ngModelOptions]="{standalone: true}"
                              [disabled]="view" />
                          </td>
                        </tr>
                      </ng-container>
                    </ng-container>
                  </table>
                </div>
              </div>
            </ng-container>

            <section>
              <section class="form-group mt-3">
                <button class="btn delete-btn me-3"
                  (click)="back()">Cancel</button>

                <button class="btn add-btn mb-3" type="submit"
                  (click)="submitMultiTabDynamicForm(tab.formGroup)">
                  Submit
                </button>
              </section>
            </section>

          </form>

        </div>
      </ng-container>

    </div>
  </div>
</div>
